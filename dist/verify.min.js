!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.verify=n():e.verify=n()}(this,function(){return i={},r.m=t=[function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.randomNum=function(e,n){return Math.floor(Math.random()*(n-e+1))+e},n.addNum=function(e,n){var t,i,r;try{t=e.toString().split(".")[1].length}catch(e){t=0}try{i=n.toString().split(".")[1].length}catch(e){i=0}return r=Math.pow(10,Math.max(t,i)),(a(e,r)+a(n,r))/r};var a=n.mulNum=function(e,n){var t=0,i=e.toString(),r=n.toString();try{t+=i.split(".")[1].length}catch(e){}try{t+=r.split(".")[1].length}catch(e){}return Number(i.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,t)}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={canvasWidth:300,canvasHeight:150,deviation:5,borderWidth:2,sliderLen:40,sliderRealLen:0,sliderRadius:9,classNameHead:"jigsaw-"};i.sliderRealLen=i.sliderLen+2*i.sliderRadius+2*i.borderWidth,n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e};function r(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a,d=t(3),o=t(0),s=t(1),l=(a=s)&&a.__esModule?a:{default:a};t(5);var c=l.default.deviation,u=l.default.borderWidth,f=l.default.classNameHead,p=l.default.canvasWidth,h=l.default.canvasHeight,g=l.default.sliderLen,v=l.default.sliderRealLen,b=l.default.sliderRadius,m=(i(w,[{key:"init",value:function(){this.initDOM(),this.initImg(),this.bindEvents()}},{key:"initDOM",value:function(){var e=(0,d.createCanvas)(p,h);e.setAttribute("class",f+"canvas");var n=e.cloneNode(!0),t=(0,d.createElement)("div",f+"sliderContainer"),i=(0,d.createElement)("div",f+"refreshIcon"),r=(0,d.createElement)("div",f+"sliderMask"),a=(0,d.createElement)("div",f+"slider"),o=(0,d.createElement)("span",f+"sliderIcon"),s=(0,d.createElement)("span",f+"sliderText");n.className=f+"block",s.innerHTML=this.options.sliderText;var l=this.el;l.appendChild(e),l.appendChild(i),l.appendChild(n),a.appendChild(o),r.appendChild(a),t.appendChild(r),t.appendChild(s),l.appendChild(t),Object.assign(this,{canvas:e,block:n,sliderContainer:t,refreshIcon:i,slider:a,sliderMask:r,sliderIcon:o,text:s,canvasCtx:e.getContext("2d"),blockCtx:n.getContext("2d")})}},{key:"initImg",value:function(){var t=this,i=(0,d.createImg)(this.options.images,function(){t.draw(),t.canvasCtx.drawImage(i,0,0,p,h),t.blockCtx.drawImage(i,0,0,p,h);var e=t.y-2*b-1,n=t.blockCtx.getImageData(t.x-3,e,v,v);t.block.width=v,t.blockCtx.putImageData(n,0,e)});this.img=i}},{key:"draw",value:function(){this.x=(0,o.randomNum)(v+10,p-(v+10)),this.y=(0,o.randomNum)(10+2*b,h-(v+10)),(0,d.drawCanvas)(this.canvasCtx,this.x,this.y,"fill"),(0,d.drawCanvas)(this.blockCtx,this.x,this.y,"clip")}},{key:"clean",value:function(){this.canvasCtx.clearRect(0,0,p,h),this.blockCtx.clearRect(0,0,p,h),this.block.width=p}},{key:"bindEvents",value:function(){var a=this;function e(e){o=e.clientX||e.touches[0].clientX,s=e.clientY||e.touches[0].clientY,c=!0}function n(e){if(!c)return!1;var n=e.clientX||e.touches[0].clientX,t=e.clientY||e.touches[0].clientY,i=Math.round(n-o),r=Math.round(t-s);if(i<0||p<=i+g)return!1;a.slider.style.transition="",a.slider.style.left=i+"px",a.block.style.left=p<=v+i?p-v+"px":i+"px",(0,d.addClass)(a.sliderContainer,f+"sliderContainer_active"),a.sliderMask.style.width=i+"px",l.push(r)}function t(e){if(!c)return!1;if(c=!1,(e.clientX||e.changedTouches[0].clientX)==o)return!1;(0,d.removeClass)(a.sliderContainer,f+"sliderContainer_active"),a.trail=l;var n=a.verify(),t=n.spliced,i=n.verified;t?i?((0,d.addClass)(a.sliderContainer,f+"sliderContainer_success"),"function"==typeof a.onSuccess&&a.onSuccess()):((0,d.addClass)(a.sliderContainer,f+"sliderContainer_fail"),a.reset()):((0,d.addClass)(a.sliderContainer,f+"sliderContainer_fail"),"function"==typeof a.onFail&&a.onFail(),setTimeout(function(){a.reset()},1e3))}this.el.onselectstart=function(){return!1},this.refreshIcon.onclick=function(){a.reset(),"function"==typeof a.onRefresh&&a.onRefresh()};var o=void 0,s=void 0,l=[],c=!1;this.slider.addEventListener("mousedown",e),this.slider.addEventListener("touchstart",e),this.block.addEventListener("mousedown",e),this.block.addEventListener("touchstart",e),document.addEventListener("mousemove",n),document.addEventListener("touchmove",n),document.addEventListener("mouseup",t),document.addEventListener("touchend",t)}},{key:"verify",value:function(){var e=this.trail,n=e.reduce(o.addNum)/e.length,t=e.map(function(e){return e-n}),i=Math.sqrt(t.map(o.mulNum).reduce(o.addNum)/e.length),r=Math.round(parseFloat(this.block.style.left));return{spliced:Math.abs(r+2*u-this.x)<=c,verified:0!==i}}},{key:"reset",value:function(){this.sliderContainer.className=f+"sliderContainer",this.slider.style.left=0,this.block.style.left=0,this.slider.style.transition="left 0.3s",this.sliderMask.style.width=0,this.clean(),this.img.setSrc((0,d.getRandomImgSrc)(this.options.images))}}]),w);function w(e,n){var t=n.options,i=n.onSuccess,r=n.onFail,a=n.onRefresh;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,w),Object.assign(e.style,{position:"relative",width:p+"px",margin:"0 auto"});this.options=Object.assign({images:[],sliderText:"Slide to unlock"},t),(0,d.isArray)(this.options.images)||(this.options.images=[]),this.el=e,this.onSuccess=i,this.onFail=r,this.onRefresh=a,this.init()}window.Jigsaw=m,n.default=m},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isArray=void 0,n.createCanvas=function(e,n){var t=document.createElement("canvas");return t.width=e,t.height=n,t},n.createImg=function(e,n){var t=0,i=-1<window.navigator.userAgent.indexOf("Trident"),r=new Image;return r.crossOrigin="Anonymous",r.onload=n,r.onerror=function(){t<=3&&(t+=1,r.setSrc(d(e)))},r.setSrc=function(e){if(i){var n=new XMLHttpRequest;n.onloadend=function(e){var n=new FileReader;n.readAsDataURL(e.target.response),n.onloadend=function(e){r.src=e.target.result}},n.open("GET",e),n.responseType="blob",n.send()}else r.src=e},r.setSrc(d(e)),r},n.createElement=function(e,n){var t=document.createElement(e);return t.className=n,t},n.addClass=function(e,n){e.classList.add(n)},n.removeClass=function(e,n){e.classList.remove(n)},n.getRandomImgSrc=d,n.drawCanvas=function(e,n,t,i){var r=Math.PI;e.beginPath(),e.moveTo(n,t),e.arc(n+l/2,t-c+2,c,.72*r,2.26*r),e.lineTo(n+l,t),e.arc(n+l+c-2,t+l/2,c,1.21*r,2.78*r),e.lineTo(n+l,t+l),e.lineTo(n,t+l),e.arc(n+c-2,t+l/2,c+.4,2.76*r,1.24*r,!0),e.lineTo(n,t),e.lineWidth=s,e.fillStyle="rgba(255, 255, 255, 0.7)",e.strokeStyle="rgba(255, 255, 255, 0.7)",e.stroke(),e[i](),e.globalCompositeOperation="destination-over"};var i,r=t(0),a=t(1),o=(i=a)&&i.__esModule?i:{default:i};var s=o.default.borderWidth,l=o.default.sliderLen,c=o.default.sliderRadius;n.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)};function d(e){return e.length?e[(0,r.randomNum)(0,e.length-1)]:t(4).default}},function(e,n,t){"use strict";t.r(n),n.default="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACWCAMAAABThUXgAAAAOVBMVEXMzMyGhobJycm3t7d5eXltbW2+vr5mZmbDw8NpaWmAgICZmZlycnKurq6ysrKSkpKpqamOjo6kpKQuW26QAAAC20lEQVR42u3Z22rrMBAF0NF16+br/3/swVTGCmUKeQhEh72e1DHMpLtSYqdCREREREREREREREREREREREREREREREREREREREREREREREQ0jVRLy6Edq4zWzYcc/NarWlmXCkShdJvAGaqzNtYMY+UWC/yebNo9ShStrEuuBmD4GQOl2wS2FvtLzyjSuYDtvo7g/iijG9bj6rZioHT7fsuTUAXOvg8CjNwMQtLLdvEATnuVTgD+TPLjJawTA63b1yto0kXcwRnkKLeYYf4qpwZ4uexAldtrWNt4Rev29TKydBZ9HQEjDwNErXxx+AnJNlRRwipY5KF1+3YNYQxrOI/jEapquV/ITuRAES2sNkahDvl2NZzSpfs4FcDJwwFFL/cr3q4IUQvLIstDHTKR5f7jNiDJIwFNK/dlAI6GXbSwHLw81CETMWhJLhmw8rBAVspDzoARNaz95aI6ZB4LWpS3w+o2AE4Pq6LupuXczPIfhGXdFrYk8vYx7A4A3qphGcCf0aazwcfJjyEA5Oqke/sNXna0BhxqWB6HlUvyCHH6N/jktuwXef/W4ZIC1hXAroVVzHD36dUhE1nul+8A8+tDXin3ZRXZgBCVsAYHsGvdZnIg9yPSF+NTkF6WCm9FrO+Vv8NaAaN1m2xrHb+f1EzfMGp5vXde1p4NRwloSrepRKD12DJqL27Ii1y08pp7xFIBrE8z5WABWek2k/Fex3mU/r1c/6xXyrFmoKRrmU4A+bzWNu4eQDudfWPIhGF1y+EDgj8Wuahl/BiW6MtO3b6v3WZQc335PfznHta7BTAypzA+ZOzA9pkhQcYHo13mlMewCnL89BAb4GVSBn7cWPXjQw5kJ5OKwdvnvmD70JBWpKvIi0wrlladlbQYtEU+JBV/Riv9H4QzWw+fEfyxf3hIuIasQkRERERERERERERERERERERERERERERERERERERERERERERE3+kfwW4iZutz7e0AAAAASUVORK5CYII="},function(e,n,t){var i=t(6);"string"==typeof i&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};t(10)(i,r);i.locals&&(e.exports=i.locals)},function(e,n,t){n=e.exports=t(7)(!1);var i=t(8)(t(9));n.push([e.i,"\nhtml {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  -ms-overflow-style: scrollbar;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-touch-callout: none;\n}\n\n.jigsaw-block {\n  position: absolute;\n  left: 0;\n  top: 0;\n  cursor: pointer;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n\n.jigsaw-block:active {\n  cursor: pointer;\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.jigsaw-sliderContainer {\n  position: relative;\n  text-align: center;\n  width: 300px;\n  height: 38px;\n  line-height: 38px;\n  margin-top: 15px;\n  background: #f7f9fa;\n  color: #45494c;\n  border: 1px solid #e4e7eb;\n}\n.jigsaw-sliderContainer, .jigsaw-sliderContainer * {\n  -webkit-box-sizing: content-box;\n          box-sizing: content-box;\n}\n \n.jigsaw-sliderContainer_active .jigsaw-slider {\n  height: 38px;\n  top: -1px;\n  border: 1px solid #1991FA;\n}\n\n.jigsaw-sliderContainer_active .jigsaw-sliderMask {\n  height: 38px;\n  border-width: 1px;\n}\n\n.jigsaw-sliderContainer_success .jigsaw-slider {\n  height: 38px;\n  top: -1px;\n  border: 1px solid #52CCBA;\n  background-color: #52CCBA !important;\n}\n\n.jigsaw-sliderContainer_success .jigsaw-sliderMask {\n  height: 38px;\n  border: 1px solid #52CCBA;\n  background-color: #D2F4EF;\n}\n\n.jigsaw-sliderContainer_success .jigsaw-sliderIcon {\n  background-position: 0 -13px !important;\n}\n\n.jigsaw-sliderContainer_fail .jigsaw-slider {\n  height: 38px;\n  top: -1px;\n  border: 1px solid #f57a7a;\n  background-color: #f57a7a !important;\n}\n\n.jigsaw-sliderContainer_fail .jigsaw-sliderMask {\n  height: 38px;\n  border: 1px solid #f57a7a;\n  background-color: #fce1e1;\n}\n\n.jigsaw-sliderContainer_fail .jigsaw-sliderIcon {\n  top: 14px;\n  background-position: 0 -67px !important;\n}\n.jigsaw-sliderContainer_active .jigsaw-sliderText, .jigsaw-sliderContainer_success .jigsaw-sliderText, .jigsaw-sliderContainer_fail .jigsaw-sliderText {\n  display: none;\n}\n\n.jigsaw-sliderMask {\n  position: absolute;\n  left: -1px;\n  top: -1px;\n  height: 100%;\n  border: 0 solid #1991FA;\n  background: #D1E9FE;\n}\n\n.jigsaw-slider {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 40px;\n  height: 40px;\n  background: #fff;\n  -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);\n          box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);\n  -webkit-transition: background .2s linear;\n  transition: background .2s linear;\n  cursor: pointer;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n\n.jigsaw-slider:active {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.jigsaw-slider:hover {\n  background: #1991FA;\n}\n\n.jigsaw-slider:hover .jigsaw-sliderIcon {\n  background-position: 0 0;\n}\n\n.jigsaw-sliderIcon {\n  position: absolute;\n  top: 15px;\n  left: 13px;\n  width: 14px;\n  height: 12px;\n  background: url("+i+") 0 -26px;\n  background-size: 32px 544px;;\n}\n\n.jigsaw-refreshIcon {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  outline: none;\n  background: url("+i+");\n  background-position: 0 -299px;\n  background-size: 32px 544px;\n}\n\n.jigsaw-canvas, .jigsaw-sliderContainer, .jigsaw-sliderContainer .jigsaw-sliderMask, .jigsaw-slider {\n  border-radius: 2px;\n}",""])},function(e,n,t){"use strict";e.exports=function(t){var s=[];return s.toString=function(){return this.map(function(e){var n=function(e,n){var t=e[1]||"",i=e[3];if(!i)return t;if(n&&"function"==typeof btoa){var r=function(e){var n=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n);return"/*# ".concat(t," */")}(i),a=i.sources.map(function(e){return"/*# sourceURL=".concat(i.sourceRoot).concat(e," */")});return[t].concat(a).concat([r]).join("\n")}return[t].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(n,"}"):n}).join("")},s.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var t={},i=0;i<this.length;i++){var r=this[i][0];null!=r&&(t[r]=!0)}for(var a=0;a<e.length;a++){var o=e[a];null!=o[0]&&t[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="(".concat(o[2],") and (").concat(n,")")),s.push(o))}},s}},function(e,n,t){"use strict";e.exports=function(e,n){return n=n||{},"string"!=typeof(e=e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,n,t){"use strict";t.r(n),n.default="./img/icon_light.png"},function(e,n,r){"use strict";var t,i,d={},a=function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t},o=(i={},function(e){if(void 0===i[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}i[e]=n}return i[e]});function u(e,n){for(var t=[],i={},r=0;r<e.length;r++){var a=e[r],o=n.base?a[0]+n.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(s):t.push(i[o]={id:o,parts:[s]})}return t}function f(e,n){for(var t=0;t<e.length;t++){var i=e[t],r=d[i.id],a=0;if(r){for(r.refs++;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(v(i.parts[a],n))}else{for(var o=[];a<i.parts.length;a++)o.push(v(i.parts[a],n));d[i.id]={id:i.id,refs:1,parts:o}}}}function s(n){var t=document.createElement("style");if(void 0===n.attributes.nonce){var e=r.nc;e&&(n.attributes.nonce=e)}if(Object.keys(n.attributes).forEach(function(e){t.setAttribute(e,n.attributes[e])}),"function"==typeof n.insert)n.insert(t);else{var i=o(n.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var l,c=(l=[],function(e,n){return l[e]=n,l.filter(Boolean).join("\n")});function p(e,n,t,i){var r=t?"":i.css;if(e.styleSheet)e.styleSheet.cssText=c(n,r);else{var a=document.createTextNode(r),o=e.childNodes;o[n]&&e.removeChild(o[n]),o.length?e.insertBefore(a,o[n]):e.appendChild(a)}}var h=null,g=0;function v(n,e){var t,i,r;if(e.singleton){var a=g++;t=h=h||s(e),i=p.bind(null,t,a,!1),r=p.bind(null,t,a,!0)}else t=s(e),i=function(e,n,t){var i=t.css,r=t.media,a=t.sourceMap;if(r&&e.setAttribute("media",r),a&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,t,e),r=function(){!function(e){if(null===e.parentNode)return;e.parentNode.removeChild(e)}(t)};return i(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;i(n=e)}else r()}}e.exports=function(e,l){(l=l||{}).attributes="object"==typeof l.attributes?l.attributes:{},l.singleton||"boolean"==typeof l.singleton||(l.singleton=a());var c=u(e,l);return f(c,l),function(e){for(var n=[],t=0;t<c.length;t++){var i=c[t],r=d[i.id];r&&(r.refs--,n.push(r))}e&&f(u(e,l),l);for(var a=0;a<n.length;a++){var o=n[a];if(0===o.refs){for(var s=0;s<o.parts.length;s++)o.parts[s]();delete d[o.id]}}}}}],r.c=i,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)r.d(t,i,function(e){return n[e]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=2);function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var t,i});